<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Scientific Programming Guidelines</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/solarized.css" id="theme">
    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/zenburn.css" id="highlight-theme">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="dist/custom.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Scientific Programming Best Practices</h2>
          <p style="margin-top: 10%;">Tom Westerhout<br>
            <span style="font-size: 80%;">2 February 2021</span></p>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Contents</h2>

          <ul>
            <li>Reproducibility;<br>
              <span class="fragment">
                &rarr; keep track of your files<br></span>
              <span class="fragment">
                &nbsp; &nbsp; &rarr; <span class="concept">Version Control Systems (VCS)</span></span>
            </li>
            <li>Correctness;</li>
            <li style="color: #93a1a1;">Performance &mdash; some other time.</li>
          </ul>
        </section>

        <!--
        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Version control</h2>
          <p>This slide is unfinished and contains random thoughts</p>

          <ul>
            <li>What is version control?</li>
            <li>Git!</li>
            <li>Main concepts</li>
            <li>Main commands</li>
            <li>Cheat sheets</li>
            <li>What to do with data?</li>
            <li>Git LFS</li>
            <li>Surfdrive &amp; DVC</li>
          </ul>
        </section>
        -->

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>What is version control?</h2>

          <div style="width: 70%; margin-left: auto; margin-right: auto;">
            <blockquote style="width: 100%">
              Version control is a system that records changes to a file or set
              of files over time so that you can recall specific versions later.
            </blockquote>
            <p style="font-size: 50%; text-align: right;">
              <span style="font-style: italic">Source:</span>
              <a href=https://git-scm.com/book/en/v2>Pro Git Book</a>
            </p>
          </div>

          <div class="fragment"
               style="width: 100%; margin-top: 5%; margin-left: auto; margin-right: auto;">
            <p style="text-align: left;">Example:</p>
            <pre style="font-size: 80%; width: 100%;"><code data-trim data-noescape class="shell">
              $ ls
              main_fixed_eq5.tex  main_prb.tex  main_prl_final.tex
              main_prl.tex        main.tex      main_v2.tex
              $ # Thinking...
              $ cp main_prb.tex main_prb_final.tex
            </code></pre>
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Local version control systems</h2>

          <div class="r-hstack">
            <div class="fragment" style="text-align: left; margin-right: 5%;">
              <ul class="checklist" >
                <li class="fail">How to collaborate?</li>
                <li class="fail">Files are all in one place!</li>
              </ul>
            </div>
            <img src="assets/img/local_version_control.png" style="margin: 0; width: 50%;">
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Centralized version control systems</h2>

          <div class="r-hstack">
            <div class="fragment" style="text-align: left; margin-right: 2%;">
              <ul class="checklist">
                <li class="pass">How to collaborate?</li>
                <li class="fail">Files are all in one place!</li>
              </ul>
            </div>
            <img src="assets/img/centralized_version_control.png" style="margin: 0; width: 60%;">
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2 style="margin-bottom: 0;">Distributed version control systems</h2>

          <div class="r-hstack">
            <div class="fragment" style="text-align: left; margin-right: 5%;">
              <ul class="checklist">
                <li class="pass">How to collaborate?</li>
                <li class="pass">Files are all in one place!</li>
              </ul>
              <p class="fragment" style="margin-top: 10%; text-align: center; font-size: 200%; font-weight: bold;">
                Git</p>
            </div>
            <img src="assets/img/distributed_version_control.png" style="margin: 0; width: 42%;">
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Git</h2>

          <div style="width: 70%; margin-left: auto; margin-right: auto;">
            <blockquote style="width: 100%;">
              Of the professional developers who responded to the survey,
              almost <span style="font-weight: bold;">82%</span> use GitHub as a
              collaborative tool
            </blockquote>
            <p style="font-size: 50%; margin-top: 0; text-align: right;">
              <span style="font-style: italic">Source:</span>
              <a href=https://insights.stackoverflow.com/survey/2020#technology-collaboration-tools>
                Stack Overflow Developer Survey 2020</a>
            </p>
          </div>

          <ul class="fragment">
            <li>Concepts</li>
            <li>Example &amp; some commands</li>
          </ul>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2 style="margin-bottom: 7%;">Repository (or Git project)</h2>

          <code style="font-weight: bold; font-size: 150%;">
            repository = files + history</code>

          <div class="r-hstack fragment" style="margin-top: 5%;">
            <p style="margin-top: 2%; margin-bottom: auto; margin-left: 5%; margin-right: 0;">
              Files:</p>
            <pre style="font-size: 60%; margin-left: 4%; width: 45%;"><code data-trim data-noescape class="shell">
              quantum_skyrmions/
              ├── Analysis
              │   ├── 19_site_cluster.yml
              │   ├── 7_site_cluster.yml
              │   ├── slurm_main.sh
              │   └── SpinED-x86_64.AppImage
              ├── Drafts
              │   ├── paper.tex
              │   └── references.bib
              ├── Figures
              │   ├── ground_state_energy.pdf
              │   └── topological_invariant.pdf
              ├── Proofs
              ├── Published
              ├── Raw data
              │   ├── exact_diagonalization_result_19.h5
              │   └── exact_diagonalization_result_7.h5
              └── Submitted
            </code></pre>
            <p style="margin-top: auto; margin-bottom: auto; margin-left: 4%;">
              i.e. your whole project folder</p>
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>History</h2>

          <div style="width: 70%; margin-left: auto; margin-right: auto;">
            <blockquote style="width: 100%;">
              The file history appears as snapshots in time called <span class="concept">commits</span>
            </blockquote>
            <p style="font-size: 55%; margin-top: 0; text-align: right;">
              <span style="font-style: italic">Source:</span>
              <a href=https://guides.github.com/introduction/git-handbook/>Git Handbook</a>
            </p>
          </div>

          <ul>
            <li class="fragment">Commits are described by <span class="concept">hashes</span> (SHA),<br>
              e.g. <code>9d33835a8e744c5f9cc950f672885dd706c0852f</code></li>
            <li class="fragment">Hash function is any function that can be used
              to map data of arbitrary size to fixed-size values
              <span style="font-size: 55%;">(<span style="font-style: italic;">Source:</span>
                <a href="https://en.wikipedia.org/wiki/Hash_function">Wikipedia</a>)</span></li>
            <li class="fragment">Commits are assembled into linked lists:
                <img src="assets/img/linked_list_1.png" style="text-align: center; width: 80%;">
            </li>
          </ul>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>History</h2>
          <img src="assets/img/linked_list_2.png" style="text-align: center; width: 100%;">
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2 style="margin-top: 0; margin-bottom: 0;">Example: creating a repository</h2>

          <ul style="margin-top: 10px;">
            <li>Choose a server: <a href="https://github.com/">Github</a>,
              <a href="https://about.gitlab.com/">GitLab.com</a>,
              <a href="https://gitlab.science.ru.nl/">Science GitLab</a></li>
            <li>Create a repository using web interface (Github as an example):
              <div style="text-align: center;" class="r-stack">
                <img src="assets/img/github_click_on_new.png"
                     style="width: 80%; border: 4px solid #657b83; margin-top: 10px; margin-bottom: 0;"
                     class="fragment fade-out"
                     data-fragment-index="1"></img>
                <span class="fragment fade-out" data-fragment-index="2">
                  <img src="assets/img/github_choose_a_name.png"
                       style="width: 60%; border: 4px solid #657b83; margin-top: 10px;"
                       class="fragment fade-in"
                       data-fragment-index="1"></img>
                </span>
                <img src="assets/img/github_follow_instructions.png"
                     style="width: 85%; border: 4px solid #657b83; margin-top: 10px;"
                     class="fragment fade-in"
                     data-fragment-index="2"></img>
              </div>
            </li>
          </ul>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Example: following Github's instructions</h2>

          <pre style="font-size: 70%;"><code data-trim
                                             data-noescape
                                             data-line-numbers="1|2-3|4"
                                             class="shell">
              $ cd quantum_skyrmions/
              $ git init
              Initialized empty Git repository in .../quantum_skyrmions/.git/
              $ git remote add origin https://github.com/twesterhout/quantum_skyrmions.git
          </code></pre>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Example: making changes to files</h2>

          <pre style="font-size: 70%;"><code data-trim
                                             data-noescape
                                             data-line-numbers="1|2-3|4"
                                             class="shell">
              $ vi "SimpleTests.wl"
          </code></pre>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <p style="font-size: 200%;">
            <span style="font-weight: bold; text-decoration: underline;">Guideline:</span>
            Create a repository for every project you work on</p>

          <div style="text-align: left; margin-top: 10%; margin-left: 5%;">
            <ul>
              <li>Private/Public</li>
              <li>Github/GitLab</li>
              <li>...</li>
            </ul>
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>What to do with data?</h2>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Recap</h2>
          <h3>Version Control Systems</h3>

          <ul>
            <li>Copy/paste &rarr; Local &rarr; Centralized &rarr; Distributed &rarr; Git</li>
            <li>Repository, commits, branches</li>
            <li>Remotes?</li>
            <li><code>add</code>, <code>commit</code>, <code>push</code></li>
            <li><code>status</code>, <code>diff</code>, <code>log</code></li>
            <li><code>clone</code>, <code>pull</code></li>
            <li>Each project has a corresponding repository</li>
            <li>Git LFS for important data files</li>
          </ul>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Reproducibility</h2>

          <ul>
            <li class="fragment">Sharing your environment</li>
            <li class="fragment">Making your code portable</li>
          </ul>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Sharing your environment: virtualization</h2>

          <div style="width: 75%; margin-left: auto; margin-right: auto;">
            <blockquote style="width: 100%;">
              <span class="concept">Virtualization</span> refers to the act of
              creating a virtual (rather than actual) version of something,
              including virtual computer hardware platforms, storage devices,
              and computer network resources.
            </blockquote>
            <p style="font-size: 55%; margin-top: 0; text-align: right;">
              <span style="font-style: italic">Source:</span>
              <a href=https://en.wikipedia.org/wiki/Virtualization/>Wikipedia</a>
            </p>
          </div>

          <div style="text-align: left; margin-left: 10%;">
            <ul>
              <li>Virtual machines;</li>
              <li>Hardware drivers;</li>
              <li>...</li>
            </ul>
          </div>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Virtualization: levels</h2>

          <ul>
            <li>Virtual machines (e.g. <a href="https://www.virtualbox.org/">VirtualBox</a>,
              <a href="https://docs.microsoft.com/en-us/windows/wsl/about">Windows Subsystem for Linux</a>):<br>
              &rarr; abstracts everything <span style="text-decoration: underline;">including the kernel</span><br>
              &rarr; performance overhead
            </li>
            <li>Containers (e.g. <a href="https://www.docker.com/">Docker</a>,
              <a href="https://sylabs.io/docs/">Singularity</a>):<br>
              &rarr; reuses the kernel, but abstracts everything else<br>
              &rarr; no performance overhead
            </li>
            <li>Virtual environments</li>
          </ul>
        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Conda</h2>

        </section>

        <section data-background-image="assets/img/ru_logo_a4_imm_eng_1.png"
                 data-background-size="25%"
                 data-background-position="bottom right 10%">
          <h2>Singularity</h2>

        </section>

      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/math/math.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        slideNumber: true,
        hash: true,
        center: true,
        transition: 'none',
        controls: false,
        controlsTutorial: false,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [ RevealMath, RevealMarkdown, RevealHighlight, RevealNotes ]
      });
    </script>
  </body>
</html>
